# 5.5 FTP,SFTP文件上传

此项包含不上传，使用FTP上传，使用SSH上传三种模式。

填写服务器、用户名、密码、端口、文件上传根目录等信息即可

下面具体讲解：如何设置FTP文件上传根目录和文件下载路径等？

我们以采集 http://www.22mm.cc/mm/jingyan/gbijcced_lelja.html 为例，采集并下载它的图片并通过ftp设置上传。

**（1）采集到图片并下载******

据处理--文件下载--勾选下载图片，其他不做任何设置。

![](http://imgs.leesven.com/2016/locoyimgs/81.png)

下载如下：

![](http://imgs.leesven.com/2016/locoyimgs/80.png)

**（2）分析图片格式，设置文件保存目录，文件保存格式，文件链接地址前缀**


> 此时需要您在您的网站上正常手工发布一条包含图片的数据，看下图片格式。



例如其中图片路径是：http://www.locoy.com/images/201510/1.jpg

下面我们来将其拆分为 头+中+尾 三部分


> 头： http://www.locoy.com/ 是网站域名；



> 中： images/201510/ 是文件路径，201510是年月的意思



> 尾： 1.jpg 是文件名和后缀


所以


> 其他设置--文件图片下载--文件链接地址前缀：设置为 http://www.locoy.com/



> 内容采集规则--数据处理--文件下载--文件保存目录：设置为 images/201510/



> 内容采集规则--数据处理--文件下载--文件保存格式：设置为 [原文件名]或者[自增ID]等等自定义文件名


如下图：

![](http://imgs.leesven.com/2016/locoyimgs/64.png)

此时我们需要在绿色字体前加 \ 做转义，年月做替换，故是下图设置效果：

![](http://imgs.leesven.com/2016/locoyimgs/65.png)

**（3）确定FTP的路径**

用其他专业的FTP工具看我们的图片存储路径，比如显示为 ```/www/locoy/images/201510/``` 那么

![](http://imgs.leesven.com/2016/locoyimgs/82.png)

那么采集器FTP文件上传根目录，这里写成这样```/www/locoy/```就OK 了，如下图:

![](http://imgs.leesven.com/2016/locoyimgs/83.png)

不要重复的把```/images/201510/``` 写上，

因为在内容采集规则--数据处理--文件下载--文件保存目录 设置里，我们已经定义了路径，

软件会自动创建对应文件夹，并识别发布。

所以 亲们，不要写重复了哦。

（4）测试看效果

设置完成后，我们测试看下效果：

![](http://imgs.leesven.com/2016/locoyimgs/84.png)

这样就说明设置好了，FTP上传测试需要正式运行规则时生效。
